<h2>New Job Application!</h2>
<mat-card class="form-container">
  <h2>Job Application Create</h2>
  <form [formGroup]="jobApplicationForm" (ngSubmit)="onSubmit()" >
    <div class="form-grid">
      <mat-form-field appearance="fill">
        <mat-label>Job Title</mat-label>
        <input matInput formControlName="jobTitle" required />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Company Name</mat-label>
        <input matInput formControlName="company" required />
      </mat-form-field>      

      <mat-form-field appearance="fill">
        <mat-label>Job URL</mat-label>
        <input matInput formControlName="jobURL" required />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Application Date</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="application_Date" />
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Location</mat-label>
        <input matInput formControlName="location" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Salary</mat-label>
        <input matInput type="number" formControlName="salary" />
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Status</mat-label>
        <mat-select formControlName="status">
          <mat-option value="Applied">Applied</mat-option>
          <mat-option value="Interview">Interview</mat-option>
          <mat-option value="Offer">Offer</mat-option>
          <mat-option value="Accepted">Accepted</mat-option>
          <mat-option value="Rejected">Rejected</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Notes</mat-label>
        <textarea matInput formControlName="notes"></textarea>
      </mat-form-field>
    </div>

    <div class="file-upload">
      <label>Paste or Type Job Description:</label>
      <textarea
        matInput
        formControlName="jobDescription"
        rows="5"
        class="jd-box"
      ></textarea>
    </div>

    <div class="file-upload">
      <label>Paste or Type Resume:</label>
      <textarea
        matInput
        formControlName="resumeText"
        rows="5"
        class="resume-box"
      ></textarea>
    </div>

    <button mat-raised-button color="primary" (click)="scanMatch()" type="button" [disabled]="isScanning">
      Scan
    </button>

    <div *ngIf="feedback as f" class="feedback-section">
      <h3>Feedback:</h3>

      <p><strong>Match Score:</strong> {{ f.matchPercentage }}%</p>

      <p><strong>Strengths:</strong></p>
      <ul>
        <li *ngFor="let s of f.strengths">{{ s }}</li>
      </ul>

      <p><strong>Weaknesses:</strong></p>
      <ul>
        <li *ngFor="let w of f.weaknesses">{{ w }}</li>
      </ul>

      <p><strong>Suggestions:</strong></p>
      <ul>
        <li *ngFor="let sug of f.suggestions">{{ sug }}</li>
      </ul>
    </div>

    <button mat-raised-button color="accent" type="submit" [disabled]="isSaving">Save</button>
    <button mat-button type="button" (click)="onCancel()">Cancel</button>
  </form>
</mat-card>
